<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamble Assist</title>
    <style>
        body, html {
            cursor: none;
        }

        .cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
        }

        .trail {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0));
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            animation: fadeOut 0.5s forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(0.5);
            }
        }

        .site-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 16px;
            background: none;
            padding: 10px 0;
            margin: 0;
            text-shadow: 0 0 10px white, 0 0 20px white, 0 0 30px white;
        }

	#backButton {
    position: fixed;
    top: 20px;
    left: 20px;
    background-color: transparent;
    border: none;
    cursor: pointer;
    font-size: 30px;
    color: white;
    text-shadow: 0 0 5px white;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2px solid white;
    box-shadow: 0 0 10px white;
}

    </style>
</head>
<body>
    <!-- Back Arrow -->
    <a href="../index.html" class="back-arrow">‚Üê</a>

    <!-- Header Links -->
    <div class="header-links">
        <a href="https://www.youtube.com/@imenjayy" target="_blank">Enjayy's Youtube</a>
        <a href="https://discord.gg/enjayy" target="_blank">Enjayy's Discord</a>
        <a href="http://kick.com/enjayy" target="_blank">Enjayy's Kick <span id="live-status-text">LIVE</span></a>
        <a href="http://stake.com/?c=penny" target="_blank">Code PENNY on Stake</a>
    </div>

    <div class="announcement">
        <strong>Updates Posted in Discord</strong>
    </div>

    <!-- Mobile Menu Button (only visible on mobile) -->
    <button class="mobile-menu" onclick="toggleMobileMenu()">&#x22EE;</button>

    <!-- Mobile Overlay Menu (hidden by default, shows on mobile) -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay">
        <div class="mobile-menu-links">
            <a href="https://www.youtube.com/@imenjayy" target="_blank">Enjayy's Youtube</a>
            <a href="https://discord.gg/enjayy" target="_blank">Enjayy's Discord</a>
            <a href="http://kick.com/enjayy" target="_blank">Enjayy's Kick <span id="live-status-text">LIVE</span></a>
            <a href="http://stake.com/?c=penny" target="_blank">Code PENNY on Stake</a>
        </div>
        <div class="announcement">
            <strong>Updates Posted in Discord</strong>
        </div>
    </div>

    <!-- Back Button -->
    <button id="backButton" onclick="window.location.href='../index.html'"><</button>

    <!-- Main Content Container -->
    <div class="container">
        <h1 class="header">Mines Assistant</h1>
        <div class="wrapper">
            <form id="minesForm">
                <div class="form-group">
                    <label for="mines">Number of Mines:</label>
                    <input type="number" id="mines" name="mines" min="1" max="24" required>
                    <label for="diamonds">Number of Diamonds:</label>
                    <input type="number" id="diamonds" name="diamonds" min="1" max="25" required>
                    <label for="betSize">Bet Size:</label>
                    <input type="number" id="betSize" name="betSize" step="0.01" min="0.01" required>
                    <button type="button" onclick="doubleBet()">2x</button>
                    <button type="button" onclick="halveBet()">1/2</button>
                    <button type="button" onclick="generateMinesBoard()">Generate Mines Board</button>
                    <button type="button" id="randomizeButton" onclick="randomizeMinesAndDiamonds()">Randomize</button>
                </div>

                <!-- Multiplier and Generate Pattern input -->
                <div class="multiplier-container">
                    <label for="multiplier">Multiplier:</label>
                    <input type="number" id="multiplier" name="multiplier" step="0.01" min="1" required oninput="updateWinAmount()">
                    <button type="button" id="generatePatternButton" onclick="generatePatternBasedOnMultiplier()">Generate Pattern</button>
                </div>

            </form>

            <!-- Mines Board and Results -->
            <div id="minesBoard"></div>
            <div id="minesResults"></div>
            <div id="cursor" class="cursor"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p>&#169; 2024 GambleAssist. All rights reserved.</p>
        </div>
    </footer>
</div>
<script>
    // Cursor effect and movement
const cursor = document.getElementById('cursor');

document.addEventListener('mousemove', (event) => {
    const x = event.pageX;
    const y = event.pageY;

    cursor.style.left = `${x - 10}px`;
    cursor.style.top = `${y - 10}px`;

    const trail = document.createElement('div');
    trail.className = 'trail';
    trail.style.left = `${x - 5}px`;
    trail.style.top = `${y - 5}px`;

    document.body.appendChild(trail);

    setTimeout(() => {
        trail.remove();
    }, 500);
});

function factorial(number) {
    let value = 1;
    for (let i = number; i > 1; i--) {
        value *= i;
    }
    return value;
}

function combination(n, d) {
    if (n == d) return 1;
    return factorial(n) / (factorial(d) * factorial(n - d));
}

function calculateResults(mines, diamonds) {
    const totalCells = 25;
    const safeCells = totalCells - mines;
    const first = combination(totalCells, diamonds);
    const second = combination(safeCells, diamonds);
    const result = 0.99 * (first / second);
    const minIncreaseOnLoss = (100 / (result - 1));
    const winningChance = (99 / result);

    return {
        multiplier: result,
        minIncreaseOnLoss: minIncreaseOnLoss,
        winningChance: winningChance
    };
}

function findBestCombinationForMultiplier(targetMultiplier) {
    const totalCells = 25;
    let bestCombination = { mines: 0, diamonds: 0, multiplier: Infinity };

    for (let mines = 1; mines < totalCells; mines++) {
        for (let diamonds = 1; diamonds <= totalCells - mines; diamonds++) {
            const { multiplier } = calculateResults(mines, diamonds);
            if (Math.abs(multiplier - targetMultiplier) < Math.abs(bestCombination.multiplier - targetMultiplier)) {
                bestCombination = { mines, diamonds, multiplier };
            }
        }
    }
    return bestCombination;
}

function calculateWinAmount(multiplier) {
    const betSize = parseFloat(document.getElementById('betSize').value) || 0;
    return betSize * multiplier;
}

function generatePatternBasedOnMultiplier() {
    const multiplierInput = parseFloat(document.getElementById('multiplier').value);
    if (isNaN(multiplierInput) || multiplierInput < 1) {
        alert("Please enter a valid multiplier greater than or equal to 1.");
        return;
    }

    const { mines, diamonds, multiplier } = findBestCombinationForMultiplier(multiplierInput);

    document.getElementById('mines').value = mines;
    document.getElementById('diamonds').value = diamonds;

    const totalCells = 25;
    const cells = Array(totalCells).fill('');
    let indices = Array.from({ length: totalCells }, (v, i) => i);
    indices = indices.sort(() => Math.random() - 0.5);

    for (let i = 0; i < mines; i++) {
        cells[indices[i]] = 'mine';
    }
    for (let i = mines; i < mines + diamonds; i++) {
        cells[indices[i]] = 'diamond';
    }
    for (let i = 0; i < totalCells; i++) {
        if (cells[i] === '') {
            cells[i] = 'defaultDiamond';
        }
    }

    const board = document.getElementById('minesBoard');
    board.innerHTML = '';
    board.style.display = 'grid';
    cells.forEach(cell => {
        const cellDiv = document.createElement('div');
        cellDiv.className = 'cell ' + cell;
        board.appendChild(cellDiv);
    });

    // Update both pattern and board multiplier
    window.patternMultiplier = multiplier;
    window.minesBoardMultiplier = multiplier;

    const winAmount = calculateWinAmount(multiplier);
    const results = `
        <strong>${multiplier.toFixed(1)}x</strong><br>
        <strong>Win Amount:</strong> <span id="winAmountDisplay">$${winAmount.toFixed(2)}</span><br>
        <strong>Winning Chance:</strong> <span>${(calculateResults(mines, diamonds).winningChance).toFixed(6)}%</span><br>
        <strong>Minimal increase on loss:</strong> <span>x${(calculateResults(mines, diamonds).minIncreaseOnLoss).toFixed(3)}</span>
    `;
    document.getElementById('minesResults').innerHTML = results;

    updateWinAmountDisplay();
}

function generateMinesBoard() {
    const mines = parseInt(document.getElementById('mines').value);
    const diamonds = parseInt(document.getElementById('diamonds').value);

    if (!mines || !diamonds) {
        const results = `
        CHOOSE AMOUNT OF MINES AND DIAMONDS IDIOT
        `;
        document.getElementById('minesResults').innerHTML = results;
        return;
    }

    const totalCells = 25;
    const cells = Array(totalCells).fill('');

    if (mines + diamonds > totalCells) {
        alert('Too many mines and diamonds!');
        return;
    }

    let indices = Array.from({ length: totalCells }, (v, i) => i);
    indices = indices.sort(() => Math.random() - 0.5);

    for (let i = 0; i < mines; i++) {
        cells[indices[i]] = 'mine';
    }

    for (let i = mines; i < mines + diamonds; i++) {
        cells[indices[i]] = 'diamond';
    }

    for (let i = 0; i < totalCells; i++) {
        if (cells[i] === '') {
            cells[i] = 'defaultDiamond';
        }
    }

    const board = document.getElementById('minesBoard');
    board.innerHTML = '';
    board.style.display = 'grid';
    cells.forEach(cell => {
        const cellDiv = document.createElement('div');
        cellDiv.className = 'cell ' + cell;
        board.appendChild(cellDiv);
    });

    const { multiplier, minIncreaseOnLoss, winningChance } = calculateResults(mines, diamonds);

    // Update both multipliers
    window.minesBoardMultiplier = multiplier;
    window.patternMultiplier = multiplier;

    const winAmount = calculateWinAmount(multiplier);
    const results = `
        <strong>${multiplier.toFixed(2)}x</strong><br>
        <strong>Win Amount:</strong> <span id="winAmountDisplay">$${winAmount.toFixed(2)}</span><br>
        <strong>Winning Chance:</strong> <span>${winningChance.toFixed(6)}%</span><br>
        <strong>Minimal increase on loss:</strong> <span>x${minIncreaseOnLoss.toFixed(5)}</span>
    `;
    document.getElementById('minesResults').innerHTML = results;

    updateWinAmountDisplay();
}

function doubleBet() {
    const betInput = document.getElementById('betSize');
    let currentBet = parseFloat(betInput.value);
    currentBet = currentBet * 2;
    betInput.value = currentBet < 1 ? currentBet.toFixed(4) : currentBet.toFixed(2);
    updateWinAmountDisplay(); // Ensure display updates after doubling
}

function halveBet() {
    const betInput = document.getElementById('betSize');
    let currentBet = parseFloat(betInput.value);
    currentBet = currentBet / 2;
    betInput.value = currentBet < 1 ? currentBet.toFixed(4) : currentBet.toFixed(2);
    updateWinAmountDisplay(); // Ensure display updates after halving
}

function toggleMobileMenu() {
    const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
    
    // Toggle display of the mobile menu overlay
    if (mobileMenuOverlay.style.display === 'none' || mobileMenuOverlay.style.display === '') {
        mobileMenuOverlay.style.display = 'flex';
    } else {
        mobileMenuOverlay.style.display = 'none';
    }
}

function randomizeMinesAndDiamonds() {
    const totalCells = 25;

    let mines = Math.floor(Math.random() * 24) + 1;
    let diamonds = Math.floor(Math.random() * (totalCells - mines)) + 1;

    document.getElementById('mines').value = mines;
    document.getElementById('diamonds').value = diamonds;

    generateMinesBoard();
    updateWinAmountDisplay(); // Update win amount when randomizing
}

// Function to update win amount display
function updateWinAmountDisplay() {
    const betSize = parseFloat(document.getElementById('betSize').value) || 0;
    const multiplier = window.minesBoardMultiplier || window.patternMultiplier || 1; // Use the active multiplier
    const winAmount = betSize * multiplier;
    const winAmountElement = document.getElementById('winAmountDisplay');
    if (winAmountElement) {
        winAmountElement.textContent = `$${winAmount.toFixed(2)}`;
    }
}

async function checkIfLive() {
    try {
        const response = await fetch('https://kick.com/api/v1/channels/enjayy');
        const data = await response.json();

        const isLive = data.livestream && data.livestream.is_live;
        const statusText = document.getElementById('live-status-text');

        if (isLive) {
            statusText.style.color = 'green';
        } else {
            statusText.style.color = 'red';
        }
    } catch (error) {
        console.error('Error fetching live status:', error);
    }
}

setInterval(checkIfLive, 10000);  // Check live status every 10 seconds

// Add event listener for betSize input field change
document.getElementById('betSize').addEventListener('input', updateWinAmountDisplay);

  document.getElementById("menuButton").addEventListener("click", function() {
    var menuPopup = document.querySelector(".menu-popup");
    menuPopup.style.display = (menuPopup.style.display === "flex") ? "none" : "flex";
  });

</script>
</body>
</html>
